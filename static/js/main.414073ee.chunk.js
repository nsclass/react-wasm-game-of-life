(this["webpackJsonpreact-wasm-game-of-life"]=this["webpackJsonpreact-wasm-game-of-life"]||[]).push([[1],{11:function(e,t,n){},13:function(e,t,n){},14:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(4),o=n.n(c),i=(n(11),n(2)),u=n.n(i),s=n(5),l=n(1),f=(n(13),function(e){var t=r.a.useRef(),n=r.a.useRef(),a=function a(r){if(void 0!==n.current){var c=r-n.current;e(c)}n.current=r,t.current=requestAnimationFrame(a)};r.a.useEffect((function(){return t.current=requestAnimationFrame(a),function(){return cancelAnimationFrame(t.current)}}),[])}),m=function(e){var t=e.universe,n=e.wasmMemory,c=Object(a.useState)(!1),o=Object(l.a)(c,2),i=o[0],u=o[1],s=r.a.useRef(null),m=Object(a.useState)(6*t.width()+1),v=Object(l.a)(m,2),h=v[0],d=(v[1],Object(a.useState)(6*t.height()+1)),b=Object(l.a)(d,2),w=b[0],g=(b[1],function(e,n){return e*t.width()+n});return r.a.useEffect((function(){var e=s.current.getContext("2d");!function(e){var n=t.width(),a=t.height();e.beginPath(),e.strokeStyle="#CCCCCC";for(var r=0;r<=n;r++)e.moveTo(6*r+1,0),e.lineTo(6*r+1,6*a+1);for(var c=0;c<=a;c++)e.moveTo(0,6*c+1),e.lineTo(6*n+1,6*c+1);e.stroke()}(e),function(e){var a=t.width(),r=t.height(),c=t.cells(),o=new Uint8Array(n.memory.buffer,c,a*r);e.beginPath();for(var i=0;i<r;i++)for(var u=0;u<a;u++){var s=g(i,u);e.fillStyle=0===o[s]?"#FFFFFF":"#000000",e.fillRect(6*u+1,6*i+1,5,5)}e.stroke()}(e),u(!1)}),[i]),f((function(e){t.tick(),u(!0)})),r.a.createElement("div",null,r.a.createElement("canvas",{id:"game-of-life-canvas",ref:s,width:h,height:w}))},v=function(){var e=Object(a.useState)(!0),t=Object(l.a)(e,2),c=t[0],o=t[1],i=Object(a.useState)(null),f=Object(l.a)(i,2),v=f[0],h=f[1],d=Object(a.useState)(null),b=Object(l.a)(d,2),w=b[0],g=b[1],p=function(){var e=Object(s.a)(u.a.mark((function e(){var t,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o(!0),console.log("loading..."),e.next=5,n.e(0).then(n.bind(null,20));case 5:return t=e.sent,h(t.Universe.new()),e.next=9,n.e(0).then(n.bind(null,19));case 9:a=e.sent,g(a),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),console.error("Unexpected error in loadWasm. [Message: ".concat(e.t0.message,"]"));case 16:return e.prev=16,o(!1),e.finish(16);case 19:case"end":return e.stop()}}),e,null,[[0,13,16,19]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){p()}),[]),c?r.a.createElement("div",{className:"container"},r.a.createElement("h1",{className:"title"},"loading...")):v&&w?r.a.createElement(m,{universe:v,wasmMemory:w}):r.a.createElement("div",null,r.a.createElement("h1",null,"Failed to load WASM"))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(v,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},6:function(e,t,n){e.exports=n(14)}},[[6,2,3]]]);
//# sourceMappingURL=main.414073ee.chunk.js.map